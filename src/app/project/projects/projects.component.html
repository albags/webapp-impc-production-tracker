<div class="col-md-12">
    <h3>Projects</h3>
    <table class="table">
        <thead>
            <th scope="col">Edit form</th>
            <th scope="col">Marker Symbol(s) / intention</th>
            <th scope="col">Plan type</th>
            <th scope="col">Work Group</th>
            <th scope="col">Work unit</th>
            <th scope="col">Status</th>
            <th scope="col">Priority</th>
            <th scope="col">Privacy</th>
        </thead>
        <tbody>
            <ng-template ngFor let-project
                [ngForOf]="projects | paginate: { id: 'server', itemsPerPage: page.size, currentPage: p, totalItems: page.totalElements }">
                <ng-template ngFor let-plan let-isFirst="first" [ngForOf]="project.planDetails">
                    <tr>
                        <td *ngIf="isFirst" [attr.rowspan]="project.planDetails.length"><a
                                routerLink="/projects/{{ project.projectDetails.tpn }}">Form</a></td>
                        <td *ngIf="isFirst" [attr.rowspan]="project.planDetails.length">
                            <ul>
                                <li *ngFor="let intention of project.projectDetails.intentions">
                                    <span>
                                        <a href="{{ intention.mgiLink }}" target="_blank">{{intention.markerSymbol}}</a>
                                        /
                                        {{intention.alleleType}}
                                    </span>
                                </li>
                            </ul>
                        </td>
                        <td>{{ plan.planTypeName }}</td>
                        <td>{{ plan.workGroupName }}</td>
                        <td>{{ plan.workUnitName }}</td>
                        <td>{{ plan.statusName  }}</td>
                        <td>{{ project.projectDetails.priorityName }}</td>
                        <td>{{ plan.privacyName }}</td>
                    </tr>
                </ng-template>
                <!-- If no plan information at all, show at least the project information -->
                <ng-container *ngIf="project.planDetails.length == 0">
                    <tr>
                        <td><a routerLink="/projects/{{ project.projectDetails.tpn }}">Form</a></td>
                        <td>
                            <ul>
                                <li *ngFor="let intention of project.projectDetails.intentions">
                                    <span>
                                        <a href="{{ intention.mgiLink }}" target="_blank">{{intention.markerSymbol}}</a>
                                        /
                                        {{intention.alleleType}}
                                    </span>
                                </li>
                            </ul>
                        </td>
                    </tr>
                </ng-container>
            </ng-template>
        </tbody>
    </table>
    <pagination-controls (pageChange)="getPage($event)" id="server"></pagination-controls>
</div>